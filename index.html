<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Poker Coach</title>
  <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#0b0b0b">
  <link rel="apple-touch-icon" href="/icon-192.png">
  <script type="module" crossorigin src="/assets/index-DFygKoBP.js"></script>
</head>
<body>
  <h1>Poker Coach</h1>

  <div class="input">
    <label>Jouw hand:</label>
    <input id="hand" placeholder="Bijv. AhKh (h = hearts)" />
  </div>

  <div class="input">
    <label>Board (optioneel):</label>
    <input id="board" placeholder="Bijv. QhJh9d" />
  </div>

  <div class="input">
    <label>Pot (â‚¬):</label>
    <input id="pot" type="number" value="10" />
  </div>

  <div class="input">
    <label>Bet van tegenstander (â‚¬):</label>
    <input id="bet" type="number" value="5" />
  </div>
  
<div class="input">
  <label>Tegenstander type (range):</label>
  <select id="villainType">
    <option value="tight">Tight</option>
    <option value="average" selected>Average</option>
    <option value="loose">Loose</option>
  </select>
</div>

<div class="input">
  <label>Aantal tegenstanders:</label>
  <input id="numOpp" type="number" value="1" min="1" max="6" />
</div>
<div class="input">
  <label>Jouw positie (preflop):</label>
  <select id="heroPos">
    <option>UTG</option>
    <option>HJ</option>
    <option>CO</option>
    <option selected>BTN</option>
    <option>SB</option>
    <option>BB</option>
  </select>
</div>
<div class="input">
  <label>Simulatiesnelheid:</label>
  <select id="simSpeed">
    <option value="5000">Snel (5k)</option>
    <option value="20000" selected>Normaal (20k)</option>
    <option value="50000">Nauwkeurig (50k)</option>
  </select>
</div>

<div class="input">
  <label>Villain positie (preflop):</label>
  <select id="villainPos">
    <option>UTG</option>
    <option>HJ</option>
    <option>CO</option>
    <option>BTN</option>
    <option selected>SB</option>
    <option>BB</option>
  </select>
</div>

<div class="input">
  <label>Situatie:</label>
  <select id="spot">
    <option value="first_in" selected>First-in (open)</option>
    <option value="vs_open">Vs open raise</option>
    <option value="vs_3bet">Vs 3-bet</option>
  </select>
</div>

<div class="input">
  <label>Postflop: ik ben in positie (IP)</label>
  <input id="ipFlag" type="checkbox" checked />
</div>

<hr>
<h2>ðŸ“· Scanner</h2>
<div style="margin-bottom:8px;">
  <button id="startCamBtn">Start camera</button>
  <button id="stopCamBtn" disabled>Stop</button>
</div>

<video id="scanVideo" autoplay playsinline muted
       style="width:100%;max-width:900px;background:#000;border-radius:12px;"></video>

<div id="camLog" style="white-space:pre-wrap;font-size:14px;background:#f6f6f6;
     padding:10px;border-radius:8px;margin-top:10px;"></div>

<canvas id="frame" style="display:none"></canvas>

<p><small>Tip: zet je iPad schuin boven het scherm. Tik <b>Kalibreren</b> en sleep de kaders over: 
<b>Hero Card 1</b>, <b>Hero Card 2</b>, <b>Board 1â€“5</b>, <b>Pot</b>, <b>Bet</b>. Sla op, daarna <b>Scan & vul</b>.</small></p>

  <button id="calc">Bereken advies</button>

  <div id="result"></div>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
<script>
  const videoEl = document.getElementById('scanVideo');
  const logEl   = document.getElementById('camLog');
  const btnStart = document.getElementById('startCamBtn');
  const btnStop  = document.getElementById('stopCamBtn');

  let camStream = null;
  function log(msg){ logEl.textContent += msg + '\n'; }

  async function startCamera() {
    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
      log("âŒ getUserMedia niet beschikbaar (browser/https?)");
      return;
    }
    btnStart.disabled = true;
    try {
      const env = { video: { facingMode: { ideal: "environment" } } };
      try {
        camStream = await navigator.mediaDevices.getUserMedia(env);
      } catch {
        log("â„¹ï¸ Achtercamera niet gevonden, probeer frontcameraâ€¦");
        camStream = await navigator.mediaDevices.getUserMedia({ video: true });
      }
      videoEl.srcObject = camStream;
      btnStop.disabled = false;
      log("âœ… Camera gestart");
    } catch (e) {
      btnStart.disabled = false;
      log("âŒ Fout: " + e.name + " â€“ " + (e.message || ""));
    }
  }

  function stopCamera() {
    if (camStream) {
      camStream.getTracks().forEach(t => t.stop());
      camStream = null;
      videoEl.srcObject = null;
      log("ðŸ›‘ Camera gestopt");
    }
    btnStart.disabled = false;
    btnStop.disabled = true;
  }

  btnStart.addEventListener('click', startCamera);
  btnStop.addEventListener('click', stopCamera);
  window.addEventListener('beforeunload', stopCamera);
</script>

</body>
</html>


